# Nixpacks Configuration for Railway Deployment
# Runs both API server and Discord Bot

[phases.setup]
nixPkgs = ["python3", "nodejs_22", "gcc", "gnumake"]
aptPkgs = ["libudev-dev", "libusb-1.0-0-dev"]

[phases.install]
# Use npm install instead of npm ci for Railway compatibility
cmds = ["npm install --production=false"]

[phases.build]
cmds = []

[start]
# Start both API server and Discord bot
cmd = "node api/server.js & node bot_smart_contract.js"
