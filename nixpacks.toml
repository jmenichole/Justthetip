# Nixpacks Configuration for Railway Deployment
# Runs both API server and Discord Bot

[phases.setup]
nixPkgs = ["python3", "nodejs_20", "gcc", "gnumake"]
aptPkgs = ["libudev-dev", "libusb-1.0-0-dev"]

[phases.install]
# Use npm install for Railway compatibility
# Skip optional dependencies that fail (like usb module for hardware wallets)
cmds = ["npm install --no-optional"]

[phases.build]
cmds = []

[start]
# Start both API server and Discord bot
cmd = "node api/server.js & node bot_smart_contract.js"
