# ===================================
# JUSTTHETIP BOT - ENVIRONMENT VARIABLES
# Professional Solana Smart Contract Discord Bot
# ===================================

# ==========================================
# DISCORD CONFIGURATION (Required)
# ==========================================

# Discord bot token from Discord Developer Portal
# How to get: https://discord.com/developers/applications
#   1. Go to https://discord.com/developers/applications
#   2. Select your application (or create a new one)
#   3. Navigate to: Bot > Token
#   4. Click "Reset Token" or "Copy" to get your token
#   5. Paste the token below (keep it secure and never commit it to version control!)
DISCORD_BOT_TOKEN=YOUR_DISCORD_BOT_TOKEN_HERE

# Discord application client ID
# Found in: Your Application > OAuth2 > Client ID
#   1. In the same Discord Developer Portal
#   2. Navigate to: OAuth2 > General
#   3. Copy the "Client ID" (18-19 digit number)
DISCORD_CLIENT_ID=YOUR_DISCORD_CLIENT_ID_HERE

# Discord OAuth client secret (required for API server OAuth flow)
# Found in: Your Application > OAuth2 > Client Secret
DISCORD_CLIENT_SECRET=YOUR_DISCORD_CLIENT_SECRET_HERE

# Discord OAuth redirect URI (optional - only needed for API server OAuth flow)
# Must match the redirect URI registered in Discord Developer Portal
# Defaults to: https://jmenichole.github.io/Justthetip/landing.html if not set
# Can be set directly in environment without adding to .env file
# DISCORD_REDIRECT_URI=https://jmenichole.github.io/Justthetip/landing.html
#
# NOTE: If using Magic Link Discord Social Login, you must register BOTH redirect URIs
# in your Discord Developer Portal (OAuth2 > Redirects):
#   1. Production: https://auth.magic.link/v1/oauth2/yQOcm6A9KjEIVf77yvvfzD9bnvJQgvOLsfe-CkpHXTg=/callback
#   2. Testing: https://dashboard.magic.link/app/social_login/test_connection_callback
# See: MAGIC_DISCORD_OAUTH_FIX.md for details

# Discord guild/server ID for testing (optional in production)
# Enable Developer Mode in Discord, right-click your server, and click "Copy ID"
# Can be set directly in environment without adding to .env file
# GUILD_ID=YOUR_DISCORD_GUILD_ID_HERE

# ==========================================
# API SERVER CONFIGURATION (IMPORTANT!)
# ==========================================

# Frontend URL for wallet registration page (REQUIRED for /register-wallet command)
# This is where users are redirected to connect their Solana wallet
# 
# **CRITICAL:** If this is not set correctly in production, users will get 404 errors
# when trying to register their wallets via the /register-wallet command.
#
# For local development: http://localhost:3000
# For production: https://jmenichole.github.io/Justthetip (GitHub Pages)
#
# Default: https://jmenichole.github.io/Justthetip (if not set)
# Only change this if you're hosting the frontend elsewhere
FRONTEND_URL=https://jmenichole.github.io/Justthetip

# Base URL for the API server (REQUIRED for Discord bot)
# This tells the Discord bot where to find the API server for wallet registration
# and other API endpoints including Stripe crypto onramp.
# 
# **CRITICAL:** DO NOT use deprecated URLs like api.mischief-manager.com
# These old deployments are not properly configured and will cause errors with:
#   - Magic SDK wallet registration
#   - Stripe crypto onramp
#   - Other API features
# 
# Recommended: Use Vercel deployment for all API functionality
# For production: https://justthetip-eta.vercel.app
# For local development: http://localhost:3000
# 
# The bot will use this URL to generate wallet registration links and make API calls
# Default: https://justthetip-eta.vercel.app (if not set)
# 
# To verify configuration: curl https://justthetip-eta.vercel.app/api/magic/health
API_BASE_URL=https://justthetip-eta.vercel.app

# ==========================================
# WALLETCONNECT / REOWN (Required for Mobile Wallets)
# ==========================================

# WalletConnect Project ID for universal wallet connection support
# This enables mobile wallet connections via QR codes and deep links
# 
# **CRITICAL:** Without this, users will see raw WalletConnect URIs (wc:...)
# instead of being able to connect their wallets properly!
#
# How to get a Project ID:
#   1. Go to https://cloud.reown.com/ (formerly WalletConnect Cloud)
#   2. Sign up for a free account
#   3. Create a new project
#   4. Copy the "Project ID" from your project dashboard
#   5. Paste it below
#
# The Project ID is public and safe to expose to frontend clients
# No payment required - free tier supports up to 1M monthly requests
#
# Example: WALLETCONNECT_PROJECT_ID=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
WALLETCONNECT_PROJECT_ID=

# ==========================================
# SOLANA BLOCKCHAIN (Required)
# ==========================================

# Flat transaction fee (in SOL)
# Range: 0.02 to 0.07 SOL
# Default: 0.03 SOL
# This flat fee is deducted from each transaction and sent to the dev wallet
# Example: For a 1 SOL tip with 0.03 SOL fee, recipient gets 0.97 SOL, dev gets 0.03 SOL
# Note: Users can optionally tip the dev to help keep fees low
TRANSACTION_FEE_AMOUNT=0.03

# Helius API key for optimized Solana RPC access (optional)
# Get free key at: https://helius.dev
# Provides better performance and rate limits than public RPC
# Can be set directly in environment without adding to .env file
# HELIUS_API_KEY=your_helius_api_key_here

# Solana RPC endpoint URL (required for smart contract bot)
# For mainnet with Helius: https://mainnet.helius-rpc.com/?api-key=YOUR_HELIUS_API_KEY
# For devnet (testing): https://api.devnet.solana.com
# For testnet: https://api.testnet.solana.com
# For public mainnet: https://api.mainnet-beta.solana.com
SOLANA_RPC_URL=https://api.devnet.solana.com

# SOL_RPC_URL is an alias for SOLANA_RPC_URL (optional - for backward compatibility)
# Can be set directly in environment without adding to .env file
# SOL_RPC_URL=https://api.devnet.solana.com

# Your deployed Solana program ID (smart contract address) (optional)
# Only needed if you've deployed a custom program
# Default uses system program for demonstration
# Can be set directly in environment without adding to .env file
# JUSTTHETIP_PROGRAM_ID=your_solana_program_id_here

# ==========================================
# DATABASE (Optional)
# ==========================================

# MongoDB connection string (OPTIONAL - Advanced features only)
# The bot uses SQLite by default for local storage
# MongoDB is only needed for advanced features like wallet registration persistence
# Format: mongodb://username:password@host:port/database
# MongoDB Atlas: mongodb+srv://username:password@cluster.mongodb.net/justthetip
# Local: mongodb://localhost:27017/justthetip
# Leave unset to use in-memory storage for API features
# MONGODB_URI=mongodb://localhost:27017/justthetip_dev

# PostgreSQL connection string (optional - for advanced features)
# The bot uses SQLite by default for local storage
# PostgreSQL (including Supabase) is needed for production deployments with persistent storage
# 
# Format: postgresql://username:password@host:port/database
# 
# For Supabase (recommended for production):
#   1. Get connection string from: Supabase Dashboard > Project Settings > Database
#   2. Use the "Connection String" (URI format) or "Connection Pooling" string
#   3. Example: postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
#   4. For connection pooling (recommended): postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:6543/postgres?pgbouncer=true
# 
# For local PostgreSQL: postgresql://localhost:5432/justthetip
# 
# Can be set directly in environment without adding to .env file
# The bot runs in demo mode with SQLite if DATABASE_URL is not set
# DATABASE_URL=postgresql://localhost:5432/justthetip

# Application environment
# Options: development, production, test
# Affects logging, error handling, and security checks
NODE_ENV=development

# ==========================================
# ADMIN CONFIGURATION
# ==========================================

# Comma-separated Discord user IDs with super admin access (optional)
# Get your ID: Enable Developer Mode, right-click yourself, "Copy ID"
# Can be set directly in environment without adding to .env file
# SUPER_ADMIN_USER_IDS=your_discord_user_id_here

# Comma-separated Discord user IDs with admin access (optional)
# Can be set directly in environment without adding to .env file
# ADMIN_USER_IDS=your_discord_user_id_here

# Super admin password for sensitive operations (optional)
# Generate secure password: openssl rand -base64 32
# Can be set directly in environment without adding to .env file
# SUPER_ADMIN_SECRET=your_secure_admin_password

# Emergency admin password for critical operations (optional)
# Should be different from super admin secret
# Can be set directly in environment without adding to .env file
# EMERGENCY_ADMIN_SECRET=your_emergency_admin_password

# ==========================================
# SECURITY WARNING: PRIVATE KEYS
# ==========================================
# ⚠️  NEVER commit private keys to version control
# ⚠️  For PRODUCTION, use secure secrets management:
#     - AWS Secrets Manager
#     - HashiCorp Vault
#     - Azure Key Vault
#     - Google Cloud Secret Manager
# ==========================================

# Solana private key (optional - only for custodial/legacy bot)
# Format: [byte,array,64,bytes,total]
# NOT needed for smart contract bot (recommended mode)
# Can be set directly in environment without adding to .env file
# SOL_PRIVATE_KEY=[]

# ==========================================
# LEGACY CRYPTOCURRENCY SUPPORT
# (No longer actively used - kept for compatibility)
# ==========================================

# All legacy cryptocurrency variables are optional and can be set directly
# in the environment without adding to .env file
# Uncomment and set only if you need legacy cryptocurrency support

# Litecoin wallet private key (WIF format)
# LTC_WALLET_KEY=

# Tron private key (hex format)
# TRX_PRIVATE_KEY=

# Ethereum private key (hex format with 0x prefix)
# ETH_PRIVATE_KEY=

# XRP Ledger seed
# XRP_SEED=

# Ethereum RPC URL (Infura, Alchemy, or local node)
# ETHEREUM_RPC_URL=

# TronGrid API key
# TRON_API_KEY=

# XRP Ledger server URL
# XRP_SERVER=

# Bitcoin private key (WIF format)
# BTC_WIF=

# Bitcoin payment forwarding address
# PAY_FORWARDING_ADDRESS=

# BlockCypher API token
# BLOCKCYPHER_TOKEN=

# ==========================================
# LEGACY OAUTH VARIABLES (Deprecated)
# ==========================================
# The following variables are deprecated and kept for backward compatibility only.
# Use the DISCORD_* prefixed versions defined above instead.

# Legacy: Discord OAuth application ID (use DISCORD_CLIENT_ID instead)
# APPLICATION_ID=

# Legacy: Discord OAuth client secret (use DISCORD_CLIENT_SECRET instead)
# CLIENT_SECRET=

# Legacy: OAuth redirect URI (use DISCORD_REDIRECT_URI instead)
# REDIRECT_URI=

# Legacy: Discord OAuth public key
# PUBLIC_KEY=

# Legacy: Bot invite URL
# INVITE_URL=

# Fee payment Solana address (optional)
# Can be set directly in environment without adding to .env file
# FEE_PAYMENT_SOL_ADDRESS=

# ==========================================
# X402 PAYMENT PROTOCOL (Optional)
# ==========================================

# Treasury wallet address for receiving x402 payments
# This is where USDC payments for premium API access will be sent
# Generate a new wallet for production use
# For devnet testing, use any Solana wallet address
# Get devnet USDC from: https://spl-token-faucet.com/
# X402_TREASURY_WALLET=your_treasury_wallet_address_here

# Note: USDC mint addresses are automatically selected based on SOLANA_CLUSTER
# Devnet: 4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU
# Mainnet: EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v

# ==========================================
# PASSKEY BACKEND (Optional - Rust)
# ==========================================

# Port for the Rust passkey authentication backend
# Default: 3001
# RUST_BACKEND_PORT=3001

# Host to bind the Rust backend to
# Default: 127.0.0.1 (localhost only)
# For production with proxy: use 127.0.0.1
# For direct access: use 0.0.0.0
# RUST_BACKEND_HOST=127.0.0.1

# WebAuthn Relying Party origin (REQUIRED for passkey authentication)
# This must match the domain where users access the registration page
# For local development: http://localhost:3000
# For production: https://yourdomain.com
# Important: No trailing slash, must include protocol (http:// or https://)
# WEBAUTHN_ORIGIN=https://jmenichole.github.io

# Database path for passkey credentials (shared with Node.js)
# Default: db/justthetip.db
# Should match the main database path used by the bot
# DB_PATH=db/justthetip.db

# ==========================================
# STRIPE CRYPTO ONRAMP (Optional)
# ==========================================

# Stripe Secret Key for backend API calls
# Get from: https://dashboard.stripe.com/apikeys
# Format: sk_test_... (test) or sk_live_... (production)
# Keep this secure and never expose to frontend
# STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here

# Stripe Publishable Key for frontend widget initialization
# Get from: https://dashboard.stripe.com/apikeys
# Format: pk_test_... (test) or pk_live_... (production)
# Safe to expose to frontend
# STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here

# Stripe Webhook Secret for verifying webhook signatures
# Get from: https://dashboard.stripe.com/webhooks
# Create an endpoint: https://yourdomain.com/api/stripe/onramp/webhook
# Format: whsec_...
# STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Stripe Payment Method ID (Optional - for default payment method)
# If you want to pre-configure a default payment method for testing
# Get from: https://dashboard.stripe.com/payment-methods
# Format: pm_... (payment method ID)
# NOTE: In production, this is stored in GitHub secrets and auto-injected
# STRIPE_PAYMENT_METHOD_ID=pm_your_payment_method_id_here

# Note: Stripe Crypto Onramp allows users to purchase cryptocurrency
# directly to their Solana wallets using credit/debit cards, bank transfers,
# and other payment methods. Visit: https://stripe.com/crypto
#
# IMPORTANT: Stripe is the ONLY solution for Solana fiat on-ramp.
# Magic does NOT support fiat on-ramp for Solana (only Ethereum/Polygon).

# ==========================================
# MAGIC EMBEDDED WALLETS (Optional)
# ==========================================

# Magic provides passwordless authentication and embedded wallet creation
# for users who don't want to install a traditional wallet app.
# Users can create a Solana wallet using just their email address.
#
# Benefits:
#   - Easy onboarding (no wallet app installation required)
#   - Email-based authentication with OTP codes
#   - Cross-platform (web, mobile, React Native, Flutter)
#   - Non-custodial wallet (user controls their keys)
#   - Enterprise-grade security (SOC 2 Type 2 certified)
#
# IMPORTANT LIMITATIONS:
#   - Magic does NOT support fiat on-ramp (buying crypto) for Solana
#   - Magic on-ramp only exists for Ethereum and Polygon networks
#   - For Solana fiat on-ramp (buying SOL), use Stripe Crypto Onramp (see above)
#   - Users can still create and use Solana wallets with Magic
#   - Magic is only for wallet creation and authentication, NOT for buying crypto
#
# GitHub Secrets Configuration (Production):
#   These keys are already configured in GitHub Actions secrets and will be
#   automatically injected into the Railway deployment. You DO NOT need to
#   manually set these in production.
#
#   Configured secrets:
#     - MAGIC_PUBLISHABLE_KEY
#     - MAGIC_SECRET_KEY
#     - MAGIC_SOLANA_NETWORK
#     - MAGIC_SOLANA_RPC_URL
#     - STRIPE_SECRET_KEY
#     - STRIPE_PUBLISHABLE_KEY
#     - STRIPE_WEBHOOK_SECRET
#     - STRIPE_PAYMENT_METHOD_ID
#
# Local Development Setup:
#   For local testing, you need to get API keys from Magic dashboard:
#   1. Go to https://dashboard.magic.link
#   2. Sign up for a free account
#   3. Create a new project (name it "JustTheTip")
#   4. Copy your API keys from the dashboard
#   5. Paste them below (use test keys for local development)
#
# Pricing:
#   - Free tier: Up to 1,000 Monthly Active Users (MAU)
#   - Growth: $199/month for up to 10,000 MAU
#   - Enterprise: Custom pricing for 10,000+ MAU
#
# Documentation:
#   - Quickstart: docs/guides/MAGIC_QUICKSTART_GUIDE.md
#   - Full guide: docs/guides/MAGIC_EMBEDDED_WALLETS_EVALUATION.md
#   - Deployment URLs: docs/DEPLOYMENT_URL_GUIDE.md
#   - Magic docs: https://magic.link/docs
#
# Configuration Verification:
#   To check if Magic is properly configured, visit:
#   https://justthetip-eta.vercel.app/api/magic/health
#   
#   Expected response when properly configured:
#   {
#     "status": "ok",
#     "magic_configured": true,
#     "fully_configured": true,
#     ...
#   }
#
#   If magic_configured is false, ensure all required environment
#   variables are set in your deployment platform (Vercel dashboard).

# Magic Publishable Key (frontend SDK)
# Format: pk_test_... (test) or pk_live_... (production)
# Safe to expose to frontend - used in browser/mobile apps
# REQUIRED for /register-magic command to work
# NOTE: In production, this is automatically set from GitHub secrets
# MAGIC_PUBLISHABLE_KEY=pk_test_your_test_key_for_local_dev

# Magic Secret Key (backend API)
# Format: sk_test_... (test) or sk_live_... (production)
# Keep this secure - NEVER expose to frontend
# Used for verifying user authentication tokens on the backend
# NOTE: In production, this is automatically set from GitHub secrets
# MAGIC_SECRET_KEY=sk_test_your_test_key_for_local_dev

# Solana Network for Magic wallets
# Options: mainnet-beta, devnet, testnet
# Should match your SOLANA_RPC_URL network
# Default: mainnet-beta
# MAGIC_SOLANA_NETWORK=mainnet-beta

# Solana RPC URL for Magic wallets
# Magic SDK uses this to connect to the Solana blockchain
# Should match your main SOLANA_RPC_URL for consistency
# For mainnet: https://api.mainnet-beta.solana.com (or Helius URL)
# For devnet: https://api.devnet.solana.com
# Default: https://api.mainnet-beta.solana.com
# MAGIC_SOLANA_RPC_URL=https://api.mainnet-beta.solana.com

# Registration Token Secret (REQUIRED for Magic registration)
# Used to sign secure registration tokens for Discord users
# Generate with: openssl rand -base64 32
# Keep this secret and never commit to version control
# REGISTRATION_TOKEN_SECRET=your_secure_random_secret_here

# Note: Magic integration allows users to register via /register-magic command
# in Discord. Users receive a link, enter their email, get an OTP code,
# and instantly have a Solana wallet created - no wallet app needed!
#
# For more information, see:
#   - MAGIC_INTEGRATION_COMPLETE.md - Overview and strategy
#   - docs/guides/MAGIC_QUICKSTART_GUIDE.md - Step-by-step setup
#   - docs/guides/MAGIC_EMBEDDED_WALLETS_EVALUATION.md - Technical details

# ==========================================
# VERCEL AI GATEWAY (Optional)
# ==========================================

# Vercel AI Gateway provides a unified API endpoint to access hundreds of AI models
# from providers like OpenAI, Anthropic, Google, Meta, and xAI through a single interface.
# This simplifies AI integration by handling authentication, observability, usage monitoring,
# automatic failover, and caching across multiple model providers.
#
# Benefits:
#   - Single API endpoint for multiple AI providers (OpenAI, Anthropic, Google, etc.)
#   - Unified authentication and request handling
#   - Built-in observability and usage monitoring
#   - Automatic failover between providers
#   - Response caching for improved performance
#   - Cost tracking and rate limiting
#
# How to get started:
#   1. Go to https://vercel.com/dashboard
#   2. Navigate to your project settings
#   3. Go to AI Gateway section
#   4. Create an API key
#   5. (Optional) Connect your own provider API keys (BYOK - Bring Your Own Key)
#   6. Paste the API key below
#
# Authentication Options:
#   - AI Gateway API Key (recommended for production)
#   - OIDC Token (automatic for Vercel-deployed projects)
#   - Bring Your Own Key (BYOK) for provider-specific credentials
#
# Documentation:
#   - Official docs: https://vercel.com/docs/ai-gateway
#   - Authentication: https://vercel.com/docs/ai-gateway/authentication
#   - AI SDK integration: https://ai-sdk.dev/providers/ai-sdk-providers/ai-gateway
#
# Pricing:
#   - Vercel handles billing if you don't provide your own keys
#   - BYOK option allows you to use your own provider accounts with no markup
#   - Usage tracking available in Vercel dashboard
#
# Usage Example (with Vercel AI SDK):
#   ```javascript
#   import { generateText } from 'ai';
#   
#   const result = await generateText({
#     model: 'openai/gpt-4',  // Provider/model format
#     apiKey: process.env.AI_GATEWAY_API_KEY,
#     prompt: 'Your prompt here'
#   });
#   ```

# AI Gateway API Key (optional)
# Format: Custom API key generated from Vercel dashboard
# Required for accessing AI models through Vercel's unified gateway
# Can be set directly in environment without adding to .env file
# AI_GATEWAY_API_KEY=your_ai_gateway_api_key_here
